<!DOCTYPE html>
<html lang="en">
<head>
    <title>lucene原理是什么？_lucene教程</title>
    <meta name="keywords" content="lucene原理是什么？" />
    <meta name="description" content="lucene原理是什么？" />
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta name="applicable-device"content="pc,mobile" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="/images/favicon.ico"/>
    <link rel="bookmark" href="/images/favicon.ico"/>
    <link rel="stylesheet" href="/css/common.css" type="text/css">
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
<!--通用顶部导航-->
<div class="nav">
    <div class="nav_logo"><a href="/"><img src="/images/logo.png" alt="教程书"><h1>教程书</h1></a></div>
    <ul class="nav_menu">
        <li><a href="/" class="on">教程</a></li>
        <!--<li><a href="/forum/forum.html">论坛</a></li>-->
        <li><a href="#">工具</a></li>
    </ul>
    <div class="nav_login" id="nav">
        <a href="/login.html">
            <span class="myhead"></span>
        </a>
    </div>
</div>
<!--文章内容区-->
<div class="container">
    <div class="main">
        <!--文章左侧菜单-->
        <div class="cont_left" id="cont_left">
            <div class="menu_left_title"><a href='/jiaocheng/37/lucene_jiaocheng.html' class='link_li'><b>lucene教程</b></a>
</div>
            <dl class="menu_left_list">
   <dt onclick="flexMenu(event)">资料<img src="/images/arrows.png" alt=""></dt>
       <dd><a href="/jiaocheng/37/lucene_jiaocheng/64/qianyan.html" >前言</a></dd>
       <dd><a href="/jiaocheng/37/lucene_jiaocheng/65/lucene_shuji_tuijian.html" >lucene书籍推荐</a></dd>
</dl>
<dl class="menu_left_list">
   <dt onclick="flexMenu(event)">lucene原理<img src="/images/arrows.png" alt=""></dt>
       <dd><a href="/jiaocheng/37/lucene_jiaocheng/72/sousuoyinqing_shishenme.html" >搜索引擎是什么</a></dd>
       <dd><a href="/jiaocheng/37/lucene_jiaocheng/66/shenme_shihou_shiyong_sousuoyinqing.html" >什么时候应该考虑使用搜索引擎?</a></dd>
       <dd><a href="/jiaocheng/37/lucene_jiaocheng/67/lucene_shishenme.html" >lucene是什么</a></dd>
       <dd><a href="/jiaocheng/37/lucene_jiaocheng/68/lucene_mysql_oracle_qubie.html" >lucene、mysql、oracle的区别？</a></dd>
       <dd><a href="/jiaocheng/37/lucene_jiaocheng/69/solr_shishenme_elasticsearch_shishenme.html" >Solr是什么？ElasticSearch是什么？</a></dd>
       <dd><a href="/jiaocheng/37/lucene_jiaocheng/70/solr_elasticsearch_de_qubie.html" >solr与elasticsearch的区别？</a></dd>
       <dd><a href="/jiaocheng/37/lucene_jiaocheng/71/lucene_yuanli_shishenme.html"  class="on" >lucene原理是什么？</a></dd>
</dl>
<dl class="menu_left_list">
   <dt onclick="flexMenu(event)">lucene快速使用<img src="/images/arrows.png" alt=""></dt>
</dl>

        </div>
        <!--移动端菜单切换-->
        <div class="mobile_list" onclick="toggleMenu('cont_left','cont_right')"><img src="/images/menu_list.png" alt=""></div>
        <!--右侧文章内容-->
        <div class="cont_right page_style" id="cont_right">
            <h2 class="book_title">lucene原理是什么？_lucene教程</h2>
            <p>这个问题问的不够准确，一般人其实想问的问题包含两个:</p>
                <p>一是lucene快速检索的原理是什么？</p>
                <p>二是lucene的搜索效果为什么好？</p>
                <h1><a name="lucenekuaisujiansuo">第一个问题: lucene快速检索的原理是什么？</a></h1>
                <h2>索引的概念</h2>
                <h3>假设，我们有一个问题，如何在一亿个从小到大排序好的有序数据集中查找一个特定的数存不存在？</h3>
                <p>基本原理是：首先在有序的数字中找到中值(最中间的那个数的值)，将要查找的目标与中值进行比较，如果目标等于中值，则数据集中存在要查找的数；如果目标小于中值，若目标存在，则一定在前半部分数据中(这样，我们待查找的数据范围缩小了一半，在一亿条数据中查找和在五千万条数据中查找，差别还是蛮大的)，如果目标大于中值，则在后半部分查找；
                </p>
                <p>如何在剩下的五千万条中查找呢？</p>
                <p>同样的方法，先找这五千万条数据中的中值，如果目标等于中值，则数据集中存在要查找的数；如果目标小于中值，则在前半部分找；如果目标大于中值，则在后半部分找。</p>
                <p>如何在剩下的二千五百万条数据中查找呢？</p>
                <p>同样的方法，先找中值，如果目标等于中值，则数据集中存在要查找的数；如果目标小于中值，则在前半部分找；如果目标大于中值，则在后半部分找。</p>
                <p>如何在剩下的一千二百五十万条数据中查找呢？</p>
                <p>以此类推，直到找到目标为止。</p>
                <p>二分查找大大降低了比较次数，二分查找的时间复杂度为：，即。</p>
                <p>用二分查找，至多查询27次，就可确定一亿个有序的数中是否包含某个数。</p>
                <h3>具体案例</h3>
                <p>假设我们要在 1，2，7，15，18，30，35，41中查找7，上图所示，则查找步骤为：</p>
                <p><img alt="二分查找" title="二分查找" src="http://px8ts3n75.bkt.clouddn.com/erfenchazhao.jfif"
                        style="width: 679px;"><br></p>
                <p>第一次查询:在 1，2，7，15，18，30，35，41中查找7。</p>
                <p>首先找到中值：中值为15（下标= (0+7)/2），将7与15进行比较，发现7比15小，继续在前面部分[1，2，7，15]找；</p>
                <p>第二次查询: 在[1，2，7，15]中查找7。</p>
                <p>首先找到中值：中值为2（下标= (0+3)/2），将7与2进行比较，发现7比2大，继续在后面部分[7，15]找；</p>
                <p>第二次查询: 在[7，15]中查找7。</p>
                <p>首先找到中值：中值为7（下标= (0+1)/2），将7与7进行比较，发现相等，代表我们已经查找到7了。查询结束。</p>
                <p><br></p>
                <h3>假设，我们有一个问题，如何在一亿个无序的数据集中查找一个特定的数存不存在？</h3>
                <p>因为是无序、毫无规则，最容易想到，顺序的拿数据集中的每一个数字与待查询的数字比较。虽然可以解决这个问题，但是这最差的情况下可能需要比较一亿次。</p>
                <p>换一种思路:如果我把无序的数据集整理成有序的数据集，则最多27次就可以查询到结果了。</p>
                <p>新的做法:我们先用无序的数字集生成一份有序的数据集[这份有序的数据集，有个专业术语叫做索引]。然后我们在索引上寻找待查询的数字。</p>
                <h3>【补充一下:专业术语】</h3>
                <p>索引作为名词时: 索引是一种拥有特定数据结构【上面的例子，指的是”有序的”这种结构】的数据。</p>
                <p>”有序的”这种结构是【索引类型】的一种。另外，我们熟知的索引类型还有B Tree索引、红黑树索引、Hash索引等</p>
                <p>把无序的数据集整理成有序的数据集的动作被称为[创建索引、生成索引]。</p>
                <p>索引还有一种意思，作为动词:代表用…生成索引[名词]的意思。</p>
                <p>把无序的数据集索引一下。【含义，用[无序的数字集]生成了一份索引[名词]】</p>
                <p>索引文档。【含义，用[文档]生成了一份索引[名词]】</p>
                <p><br></p>
                <p>由于无序的数据查找数字效率太低，我们创建了一份可以进行快速查找数据的有着特定数据结构的数据【索引】，在进行数字查找的时候，我们是在索引上进行查找的，所以查找速度提升了成千上万倍。</p>
                <p><br></p>
                <h4>同时我们可以归纳出索引的使用方式:</h4>
                <p>①创建索引</p>
                <p>②利用索引进行检索</p>
                <p><br></p>
                <h4>索引的优缺点:</h4>
                <p>相比直接在原始数据做查询，在索引上做查询速度更快。如果我们需要实时查询，直接在原始数据上操作已经不能够满足实时要求，则需要创建适合的索引。</p>
                <p>而且创建索引是一次操作，而无论多少次查询都可以使用同一份索引。</p>
                <p>虽然建立这个索引的过程比较耗资源，但是如果我的查询次数比较多，这个前置的消耗可以被认为是值得的。</p>
                <p>另外原始数据有改变【增加或是减少】，也需要维护相对应的索引保持一致，所以维护索引的成本也比较高。</p>
                <p><br></p>
                <h3>假设，我们有一个问题，如何在一亿篇文章中查找包含’lucene’的文章？</h3>
                <h4>顺序扫描</h4>
                <p>一种传统的做法叫做顺序扫描法：所谓顺序扫描，比如要找【内容包含某一个字符串】的文件，就是一个文档一个文档的看，对于每一个文档，从头看到尾，如果此文档包含此字符串，则此文档为我们要找的文件，接着看下一个文件，直到扫描完所有的文件，最终找出所有【内容包含某一个字符串】的文件。
                </p>
                <p>对于小批量的文件，这种方法还是很直接，很方便的。但是对于大批量的文件，这种方法就很慢了。</p>
                <p><br></p>
                <h4>使用索引</h4>
                <p>我们能不能仿照【查找无序数字集中是否存在某个数】时的思维，先创建一种【拥有方便查找”关键词”被哪些文章包含的数据结构的数据】索引，然后利用索引进行搜索，从而加快搜索速度。</p>
                <p>我们的目标是创造一种适合查找”关键词”被哪些文章包含的数据结构。那好，我就直接创建一种关键词到文档ID列表的映射的索引，这样给出关键词，我就能随即找到文档ID列表，不就完美解决问题了吗?</p>
                <p>具体案例</p>
                <p>文档1:邢开春录制的搜索引擎视频教程通俗易懂</p>
                <p>文档1可以划分出关键词(/邢开春/录制/的/搜索引擎/视频教程/通俗易懂/)</p>
                <p><img alt="倒排索引1" src="http://px8ts3n75.bkt.clouddn.com/daopaisuoyin1.jfif"
                        style="width: 691.699px; height: 509.273px;"><br></p>
                <p>文档2:搜索引擎视频教程在www.xingkaichun.com下载</p>
                <p>文档2可以划分出关键词(/搜索引擎/视频教程/在/www.xingkaichun.com/下载/)</p>
                <p><img alt="倒排索引2" src="http://px8ts3n75.bkt.clouddn.com/daopaisuoyin2.jfif" style="width: 918px;"><br>
                </p>
                <p>假设查找’视频教程’出现在哪些文档中。</p>
                <p>关键字’视频教程’的那一行的文档列表就是’视频教程’出现的所有文档。</p>
                <p><img alt="倒排索引3" src="http://px8ts3n75.bkt.clouddn.com/daopaisuoyin3.jfif" style="width: 877px;"><br>
                </p>
                <p>可以发现在这种关键词到文档列表的结构基础上，轻而易举就可以查到某个关键词被哪些文档包含。<br></p>
                <p>以上所说的【关键词到文档列表ID映射】是一种特别的索引类型，专业术语叫做倒排索引【倒着排列的索引】或全文索引。</p>
                <p>Lucene之所以搜索快速最重要的原因就是使用了倒排索引。除此之外，众所周知，CPU速度远远大于磁盘IO速度。lucene里大量使用压缩技术(磁盘压缩，内存压缩)，减少磁盘IO开销，充分利用CPU的性能以提高程序性能。【视频里讲解了作者的理解】
                </p>
                <p><br></p>
                <h4>【补充概念:倒排索引、正排索引】</h4>
                <p>这里为了充分理解倒排索引，将补充一些概念，既然有倒排索引？试想，是否存在与之相对应的正排索引？</p>
                <p>全文索引，又称倒排索引、反向索引、inverted index，与之相对应的是正排索引、正向索引、forward index。</p>
                <p>正排索引是什么：无论课本，杂志，还是报纸，它们都拥有一个目录。假如我们想看某篇文章，通过目录，我们可以看到这篇文章所在的页面，而不是笨拙的一页页的去看是否是这篇文章。这里，目录就是一个索引【思考：它是什么内容的索引？这样结构的索引为了什么？】。
                </p>
                <p>其实，书籍可以看做两部分组成，一部分是目录索引，另一部分是去掉目录、剩余的实际的内容。</p>
                <p>目录有文章标题到文章位置(页码)映射的特殊数据结构，可以帮助我们去了解书本中所有文章，如果喜欢文章，通过文章关联的页码直接定位文章所在书本的位置。</p>
                <p>书籍的目录即是相对书籍中的文章的一份索引信息。像目录这种索引，因为通过文章名称(文章名称相当于文章的唯一标识)去找文章，是一个很自然的操作，所以目录这种索引，被称为正向索引[正方向的索引]、正排索引[正方向排列的索引]。
                </p>
                <p><br></p>
                <p>倒排索引是什么：与正排索引相对立，如果我想通过文章中的一部分内容去找这篇文章（例如：'邢开春'这个姓名出现在哪些文章中？），就是一个反向操作了[由部分内容找整体]，不那么自然了，而且查找速度会特别慢（一本几百页的书籍，如果不做任何处理的话，想找到这个网址在哪里,你需要一行行去查找匹配，查找效率自然很慢）。好在我们可以针对书籍先做处理，找出所有出现'邢开春'的文章，建立一个从'邢开春'到文章的映射，通过映射，还是可以快速检索'邢开春'在哪篇文章之中出现，这种不太自然的映射结构，被称为倒排索引[倒着排列的索引]、全文索引、反向索引[反方向的索引]。
                </p>
                <p><br></p>
                <h4>倒排索引应该如何使用？</h4>
                <p>上面我们归纳了索引的使用方式:</p>
                <p>①创建索引</p>
                <p>②利用索引进行检索</p>
                <p><br></p>
                <p>同理，倒排索引是索引的一种类型，当然它的使用方式也应当是</p>
                <p>①建立索引:为原文档创建索引。&nbsp;</p>
                <p>②检索：利用索引进行检索。</p>
                <p><br></p>
                <p>把搜索引擎(lucene/solr/elasticsearch)使用方式用流程图表示</p>
                <p><img alt="搜索流程" title="搜索流程" src="http://px8ts3n75.bkt.clouddn.com/sousuoliucheng.jfif"
                        style="width: 692px;"><br></p>
                <h3>[搜索引擎相关概念]</h3>
                <p>文档1:邢开春录制的搜索引擎视频教程通俗易懂</p>
                <p>文档1可以划分出关键词(/邢开春/录制/的/搜索引擎/视频教程/通俗易懂/)</p>
                <p>同学们有没有注意到这里我把文章1切分了很多关键词，这个动作的专业术语叫做分词[把一句话划分为一个个独立的有意义的词汇单元]。负责分词的类在lucene源码里被称为Analyzer[分词器]。而这些个独立的有意义的词汇单元在lucene源码里被称为Term。以后我们用Term代称被分词后的一个个词汇单元。
                </p>
                <p>分词是搜索引擎里特别重要的技术。分词出来的词语是倒排索引里的词汇单元。Term匹配时，必须完全相等。而搜索就是利用的倒排索引。所以如果Term没有被分出来，就会搜索不到。</p>
                <p>用文档1的倒排索引(/邢开春/录制/的/搜索引擎/视频教程/通俗易懂/)搜索’教程’这两个字就搜索不到结果，就是因为倒排索引里没有’教程’这个Term。</p>
                <p>注意Term匹配的时候，字符串完全相等才能算匹配的上。特别注意大小写、空格等匹配，这些也需要完全相等，不然匹配不上。</p>
                <h5>停用词</h5>
                <p>进一步说，在中文文章里，几乎每一篇文章都会出现’的’、’了’等Term，思考一下，我们真的需要为这些Term创建倒排表吗？’的’、’了’，这些term本身也没什么特殊含义，另外每一篇文章都会出现这些Term，也就相当于用’的’、’了’搜索时，几乎每一篇文章都会匹配，既然所有文章都被匹配了，还搜它干什么。我们希望搜索获取有用信息，而不是大量信息。分词器在分词的时候可不是单单的划分Term，它还可以对分词出来的Term进一步处理，如过滤掉一部分词语。这里希望被分词器过滤的Term被称为停用词。
                </p>
                <p><br></p>
                <p>还有一些违法犯罪的Term[词汇有罪哈，例如一些历史事件、一些不可描述的词汇可能出现网站就被河蟹掉了]，我们希望屏蔽搜索这些词，一种方法就是不为这些Term创建倒排表。分词器在分词的时候可不是单单的划分Term，它还可以对分词出来的Term进一步处理，如过滤掉一部分词语。
                </p>
                <p>文档1:邢开春录制的搜索引擎视频教程通俗易懂</p>
                <p>‘的’是一个停用词，分词器经过分词分析处理后的分词结果如下。</p>
                <p>文档1可以划分出关键词(/邢开春/录制/搜索引擎/视频教程/通俗易懂/)</p>
                <h5>同义词</h5>
                <p>还有同义词，只要在倒排索引里创建同义词的倒排表。搜索的时候，就可以搜索到同义词。[这只是做同义词功能的一种方式]。分词器在分词的时候可不是单单的划分Term，它还可以对分词出来的Term进一步处理，如新增一部分Term。
                </p>
                <p>文档1:邢开春录制的搜索引擎视频教程通俗易懂</p>
                <p>简单明了时通俗易懂的近义词，分词器经过分词分析处理后的分词结果如下。</p>
                <p>文档1可以划分出关键词(/邢开春/录制/搜索引擎/视频教程/通俗易懂/简单明了/)</p>
                <h5>简繁搜索</h5>
                <p>/邢开春/邢開春/录制/錄製/搜索引擎/搜尋引擎/视频教程/視頻教程/通俗易懂/通俗易懂/</p>
                <h5>拼音搜索</h5>
                <p>/邢开春/xingkaichun/录制/luzhi/搜索引擎/sousuoyinqing/视频教程/shipinjiaocheng/通俗易懂/tongsuyidong/</p>
                <p>.....</p>
                <p>以上可以看到分词器十分重要，众多搜索功能的实现都与它息息相关。做搜索引擎的同学，最好要理解分词器，还需要看分词组件的源码，才好彻底掌握，才好对分词器的使用得心应手。视频会对常用分词方式、分词质量的评估、当前分词的困难点、分词组件源码进行讲解，让读者对分词有一个全面的认识。
                </p>
                <p><br></p>
                <h1><a name="lucenesousuoxiaoguo">第二个问题: lucene的搜索效果为什么好？</a></h1>
                <p>前文有说过</p>
                <p>Lucene会通过评分模型为搜索词与每一个被搜索出来商品一一计算一个相关度，相关度越大说明搜索词与商品之间的关系越大。然后商品按照与搜索词的相关度排序，和搜索词相关度大的排在前面，越靠前的商品与搜索词相关度越高，关系越大，而关键词又是用户输入的，自然靠前的商品越有可能是用户感兴趣的商品。
                </p>
                <p>Lucene提供了空间向量模型、BM25算法两种评分模型可以用来评估两篇文档的相关度。</p>
                <h2>用一个例子说明文章的相似度与哪些因素相关。</h2>
                <p>文档列表</p>
                <p>文档1 /www.xingkaichun.com/是/一个/学习/搜索引擎/技术/的/网站/[无命中]</p>
                <p>文档2 /制作/视频教程/很费/精力/[命中’视频教程’]</p>
                <p>文档3 /学习/视频教程/的/制作/也/很费/精力/[命中’视频教程’]</p>
                <p>文档4 /学不完/的/视频教程/[命中’视频教程’]</p>
                <p>文档5 /邢开春/是/一个/程序员/老鸟/[命中’邢开春’]</p>
                <p>文档6 /邢开春/是/一个/程序员/老鸟/邢开春/在/写/博客/[命中二次’邢开春’]</p>
                <p>文档7 /邢开春/录制/的/搜索引擎/视频教程/地址/在/www.xingkaichun.com/[命中’邢开春’、’视频教程’]</p>
                <p>文档8 /邢开春/是/一个/程序员/老鸟/邢开春/录制/的/搜索引擎/视频教程/在/www.xingkaichun.com/下载/[命中两次’邢开春’、一次’视频教程’]</p>
                <p>我想搜索邢开春出的搜索引擎教程，我输入’邢开春视频教程’进行搜索。</p>
                <p>我对搜索词做分词处理生成两个Term’邢开春’和’视频教程’，现在我们只考虑一个问题，如何比较文档与搜索词的相关度。</p>
                <h3>第一种情况:文档出不出现查询Term影响相关度。</h3>
                <p>文档1 /www.xingkaichun.com/是/一个/学习/搜索引擎/技术/的/网站/[无命中]</p>
                <p>文档2 /制作/视频教程/很费/精力/[命中’视频教程’]</p>
                <p>文档1和文档2，谁与搜索词相关度高？</p>
                <p>文档1没有命中[’邢开春’、’视频教程’]任何一个Term，而文档2命中了[’视频教程’]，很自然就可以认为文档2与搜索词相关度高。</p>
                <h3>第二种情况:文档的长度影响相关度。</h3>
                <p>文档3 /学习/视频教程/的/制作/也/很费/精力/[命中’视频教程’]</p>
                <p>文档4 /学不完/的/视频教程/[命中’视频教程’]</p>
                <p>文档3和文档4，谁与搜索词相关度高？</p>
                <p>文档3盒文档4分别命中了依次[’视频教程’]。是不是就没法比较了?</p>
                <p>文档3总共出现了7个Term;如果以被搜索出的关键词占总文档Term的比例来看，1/7；文档4总共出现了3个Term，比例为1/3;自然因为文档4关键词所占文档比例比较大，说明文档4主要内容实在说该Term，自然文档4胜利。
                </p>
                <h3>第三种情况:TF(Term频率)影响相关度。</h3>
                <p>文档5 /邢开春/是/一个/程序员/老鸟/[命中’邢开春’]</p>
                <p>文档6 /邢开春/是/一个/程序员/老鸟/邢开春/在/写/博客/[命中二次’邢开春’]</p>
                <p>文档5和文档6，谁与搜索词相关度高？</p>
                <p>文档5命中了一次[’邢开春’]，而文档6命中了两次[’邢开春’]。感官上来讲，文档6胜利，毕竟’邢开春’这个Term在文档6出现了两次，而文档五只出现一次。</p>
                <p>这里要引入一个概念。同一个Term在不同文章中的权重(重要性)是不同的。</p>
                <p>Term频率(Term Frequency，简称TF)是Term在文档中出现的次数。</p>
                <p>而文档中Term的TF会影响文档这个Term的权重。</p>
                <p>一般共识是Term的权重与TF成正比。</p>
                <table class="common-table">
                    <tbody>
                        <tr>
                            <th>Term<br></th>
                            <th>TF(文档5)<br></th>
                            <th>TF(文档6)<br></th>
                        </tr>
                        <tr>
                            <td>邢开春<br></td>
                            <td>1</td>
                            <td>2</td>
                        </tr>
                        <tr>
                            <td>是<br></td>
                            <td>1</td>
                            <td>2</td>
                        </tr>
                        <tr>
                            <td>一个<br></td>
                            <td>1</td>
                            <td>2</td>
                        </tr>
                        <tr>
                            <td>程序员<br></td>
                            <td>1</td>
                            <td>2</td>
                        </tr>
                        <tr>
                            <td>老鸟<br></td>
                            <td>1</td>
                            <td>2</td>
                        </tr>
                        <tr>
                            <td>在<br></td>
                            <td>0</td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>写<br></td>
                            <td>0</td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>博客<br></td>
                            <td>0</td>
                            <td>1</td>
                        </tr>
                    </tbody>
                </table>
                <h3>第四种情况:IDF(逆向文件频率)会影响相关度。</h3>
                <p>文档2 /制作/视频教程/很费/精力/[命中’视频教程’]</p>
                <p>文档5 /邢开春/是/一个/程序员/老鸟/[命中’邢开春’]</p>
                <p>文档2和文档5，谁与搜索词相关度高？</p>
                <p>文档2命中了[’视频教程’]，而文档5命中了[’邢开春’]。这两篇文档各命中一个不同的Term，是不是就没法比较了。</p>
                <p>各个Term的权重(重要性)是不同的。</p>
                <p>一个Term越多的出现在不同的文档中，说明这个Term越普遍，没有代表性，它的重要性就越低，毕竟物以稀为贵。例如’的’、’了’等Term，就因为在几乎每一篇文档都出现，所以它们的权重才低，甚至被用作停用词，彻底不起作用。而像’邢开春’这种Term，就只会出现在及其少的一部分文档中，因此权重才高。
                </p>
                <p>Term在多少个文档中出现，那么这个Term的文档频率(Document Frequency,简称DF)就是多少。文档的频率越大，Term权重越小。Term权重与文档频率成反比。</p>
                <p>‘邢开春’总计在4个文档(5/6/7/8)中出现。4是Term‘邢开春’的出现文档频率。</p>
                <p>‘视频教程’总计在5个文档(2/3/4/7/8)中出现。5是Term‘视频教程’的出现文档频率。</p>
                <p>4&lt;5。故此，权重(’邢开春’)&gt;权重(‘视频教程’)，可以简单认为文档5相比文档2更与搜索词相关。</p>
                <p>在引入一个概念，逆文档频率(Inverse Document Frequency,简称IDF)。</p>
                <p>逆文档频率，顾名思义，反向的文档频率，与文档频率成一个反比关系。文档频率越大，逆文档频率越小。文档频率越小，逆文档频率越大。Lucene里默认的IDF公式如下:</p>
                <p>IDF=log(文档总数/(DF+1))</p>
                <p>分母+1是为了避免当所有文档都不包含该Term时，分母为0的情况</p>
                <p>现在我们可以说Term的权重与文档频率成反比。也可以说Term的权重与逆文档频率成反比。同一个世界，同一个意思。</p>
                <p>而lucene提供的打分模型，VSM、BM25综合考虑了文档长度、TF、IDF等可能影响文档分值的因素。</p>
                <p>我录的视频里包含了算法的推导、源码解读、多年搜索引擎经验评分总结。.</p>
                <p>最后附上视频教程的大纲。</p>
                <p><img alt="搜索引擎教程大纲" title="搜索引擎教程大纲" src="http://px8ts3n75.bkt.clouddn.com/jiaochengdagang1.jfif"
                        style="width: 692px;"></p>
                <p><br></p>
                <p><img alt="lucene教程大纲" title="lucene教程大纲" src="http://px8ts3n75.bkt.clouddn.com/jiaochengdagang2.jfif"
                        style="width: 691px;"><br></p>
            <div class="next_page"><a id="prev" href="/jiaocheng/37/lucene_jiaocheng/70/solr_elasticsearch_de_qubie.html">上一章</a><a id="next" href="javascript:void(0)">已经是最后章节了</a></div>
        </div>
    </div>
</div>
<div class="scrolltotop" id="scrolltotop"><img src="/images/arrows2.png" alt=""></div>
<script src="/js/jQuery.js"></script>
<script src="/js/js.js"></script>
<script id="common_auto_login_js" src="/js/common_auto_login.js" data="home_page"></script>
</body>
</html>
